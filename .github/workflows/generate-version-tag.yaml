name: generate-version-tag

on:
  workflow_dispatch:
    if: github.ref == 'refs/heads/main'
    inputs:
      tag-prefix:
        description: 'Tag prefix'
        required: true
        default: ''
        type: choice
        options:
          - ''
          - 'c'
      stage:
        description: 'Stage'
        required: true
        default: 'auto'
        type: choice
        options:
          - 'alpha'
          - 'beta'
          - 'rc'
          - 'final'
          - 'auto'
      scope:
        description: 'Scope'
        required: true
        default: 'auto'
        type: choice
        options:
          - 'patch'
          - 'minor'
          - 'major'
          - 'auto'

jobs:
  generate:
    uses: JavierSegoviaCordoba/reusable-workflows/.github/workflows/generate-version-tag.yaml@main
    with:
      tag-prefix: '${{ github.event.inputs.tag-prefix }}'
      stage: '${{ github.event.inputs.stage }}'
      scope: '${{ github.event.inputs.scope }}'
    secrets: inherit
